(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{108:function(t,e,a){},109:function(t,e,a){},136:function(t,e,a){},137:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(10),c=a.n(i),s=(a(108),a(109),a(28)),o=a(29),l=a(33),u=a(32),d=a(25),p=a.n(d),m=a(17),h=a(5),b=a(179),j=a(183),f=a(2),g=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={imagetags:[]},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=this;p.a.get("".concat(m.API_Endpoint,"/mys3/")).then((function(e){var a=[];for(var n in e.data){var r="data:image/jpeg;base64,"+e.data[n];a.push(r)}t.setState({imagetags:a})}))}},{key:"render",value:function(){return Object(f.jsx)("div",{className:this.props.classes.root,children:Object(f.jsx)(b.a,{className:this.props.classes.gridList,cols:4,children:this.state.imagetags.map((function(t,e){var a="test"+e;return Object(f.jsx)(j.a,{children:Object(f.jsx)("img",{src:t})},a)}))})})}}]),a}(r.a.Component),O=(Object(h.a)((function(t){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:t.palette.background.paper},gridList:{flexWrap:"nowrap"},icon:{color:"rgba(255, 255, 255, 0.54)"}}}),{withTheme:!0})(g),a(60)),x=a(11),v=a(184),y=a(185),w=a(186),C=a(187),k=a(188),S=a(91),N=a(189),P=a(190),T=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).handleClick=function(t,e){console.log("this is:",Object(O.a)(n)),n.props.history.push({pathname:"/albumdetails",state:{albumid:t}})},n.state={text:"",albumnames:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=this;p.a.get("".concat(m.API_Endpoint,"/albums/")).then((function(e){t.setState({albumnames:e.data})}))}},{key:"render",value:function(){var t=this;return Object(f.jsx)(v.a,{className:this.props.classes.cardGrid,maxWidth:"md",children:Object(f.jsx)(y.a,{container:!0,spacing:4,children:this.state.albumnames.map((function(e){var a="".concat(m.API_Endpoint,"/pictures/")+e.albumid+"/random";return Object(f.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,children:Object(f.jsxs)(w.a,{className:t.props.classes.card,children:[Object(f.jsx)(C.a,{className:t.props.classes.cardMedia,image:a,title:"Image title"}),Object(f.jsxs)(k.a,{className:t.props.classes.cardContent,children:[Object(f.jsx)(S.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.displayname}),Object(f.jsx)(S.a,{children:"This is a media card. You can use this section to describe the content."})]}),Object(f.jsx)(N.a,{children:Object(f.jsx)(P.a,{size:"small",color:"primary",onClick:function(a){return t.handleClick(e.albumid,a)},children:"View"})})]})},e.albumid)}))})})}}]),a}(r.a.Component),I=Object(x.f)(Object(h.a)((function(t){return{cardGrid:{paddingTop:t.spacing(8),paddingBottom:t.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}}),{withTheme:!0})(T)),W=a(90);function D(){return Object(f.jsx)("div",{children:Object(f.jsx)(W.a,{children:Object(f.jsx)(I,{})})})}var A=a(38),E=a(191),F=a(192),M=a(193),B=a(194),_=a(86),z=a.n(_),L=a(200),U=a(88),R=a(85),J=a.n(R),G=a(84),q=a.n(G),V=a(36),H=Object(E.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}}}));function Y(){var t=H(),e=r.a.useState(!0),a=Object(A.a)(e,2),n=a[0],i=(a[1],r.a.useState(null)),c=Object(A.a)(i,2),s=c[0],o=c[1],l=Boolean(s),u=function(){o(null)};return Object(f.jsx)("div",{className:t.root,children:Object(f.jsx)(F.a,{position:"static",children:Object(f.jsxs)(M.a,{children:[Object(f.jsx)(B.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",component:V.b,to:"/",children:Object(f.jsx)(q.a,{})}),Object(f.jsx)(S.a,{variant:"h6",className:t.title,children:"MyPhotos"}),Object(f.jsx)(B.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",component:V.b,to:"/createalbum",children:Object(f.jsx)(J.a,{})}),n&&Object(f.jsxs)("div",{children:[Object(f.jsx)(B.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(t){o(t.currentTarget)},color:"inherit",children:Object(f.jsx)(z.a,{})}),Object(f.jsxs)(U.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:u,children:[Object(f.jsx)(L.a,{onClick:u,children:"Profile"}),Object(f.jsx)(L.a,{onClick:u,children:"My account"})]})]})]})})})}var K=a(12),Q=a.n(K),X=a(21),Z=(a(136),a(201)),$=a(195),tt=a(198),et=a(196),at=a(199),nt=a(197),rt=a(87),it=a.n(rt);function ct(t){return st.apply(this,arguments)}function st(){return(st=Object(X.a)(Q.a.mark((function t(e){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.abrupt("return",fetch("".concat(m.API_Endpoint,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ot=Object(E.a)((function(t){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===t.palette.type?t.palette.grey[50]:t.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:t.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:t.spacing(1),backgroundColor:t.palette.secondary.main},form:{width:"100%",marginTop:t.spacing(1)},submit:{margin:t.spacing(3,0,2)}}}));function lt(t){var e=t.setToken,a=ot(),r=Object(n.useState)(),i=Object(A.a)(r,2),c=i[0],s=i[1],o=Object(n.useState)(),l=Object(A.a)(o,2),u=l[0],d=l[1],p=function(){var t=Object(X.a)(Q.a.mark((function t(a){var n;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,ct({username:c,password:u});case 3:n=t.sent,e(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)(y.a,{container:!0,component:"main",className:a.root,children:[Object(f.jsx)($.a,{}),Object(f.jsx)(y.a,{item:!0,xs:!1,sm:4,md:7,className:a.image}),Object(f.jsx)(y.a,{item:!0,xs:12,sm:8,md:5,component:W.a,elevation:6,square:!0,children:Object(f.jsxs)("div",{className:a.paper,children:[Object(f.jsx)(Z.a,{className:a.avatar,children:Object(f.jsx)(it.a,{})}),Object(f.jsx)(S.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(f.jsxs)("form",{onSubmit:p,className:a.form,noValidate:!0,children:[Object(f.jsx)(tt.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(t){return s(t.target.value)}}),Object(f.jsx)(tt.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(t){return d(t.target.value)}}),Object(f.jsx)(et.a,{control:Object(f.jsx)(at.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(f.jsx)(P.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:"Sign In"}),Object(f.jsxs)(y.a,{container:!0,children:[Object(f.jsx)(y.a,{item:!0,xs:!0,children:Object(f.jsx)(nt.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(f.jsx)(y.a,{item:!0,children:Object(f.jsx)(nt.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})})]})}function ut(t,e,a){return dt.apply(this,arguments)}function dt(){return(dt=Object(X.a)(Q.a.mark((function t(e,a,n){var r,i;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r={}).albumid=e,r.displayname=a,r.discription=n,i="",t.next=7,p.a.post("".concat(m.API_Endpoint,"/albums/"),r,{headers:{"Content-Type":"application/json"}}).then((function(t){i=t,console.log(t)})).catch((function(t){console.log("Error happens"),i=t}));case 7:return t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var pt=function(){console.log("sss")},mt=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).handleSubmit=function(){var t=Object(X.a)(Q.a.mark((function t(e){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),ut(n.state.albumid,n.state.displayname,n.state.discription).then((function(t){"200"==t.status&&(console.log("Successed"),console.log(t),console.log("the albumid in client"),console.log(n.state.albumid),n.props.history.push({pathname:"/albumdetails",state:{albumid:n.state.albumid}}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.handleCapture=function(t){var e=t.target,a=new FileReader;a.readAsDataURL(e.files[0]);var r=e.files[0].name;a.onloadend=function(t){n.setState({imagePreviewUrl:a.result,loadfilename:r})}},n.state={albumid:"",displayname:"",discription:"",time:""},n}return Object(o.a)(a,[{key:"render",value:function(){var t=this,e=this.props.classes;return Object(f.jsx)(W.a,{children:Object(f.jsxs)("form",{autoComplete:"off",noValidate:!0,className:"".concat(e.root," ").concat(e.form),onSubmit:this.handleSubmit,children:[Object(f.jsx)(S.a,{variant:"h6",children:"Create a new Album"}),Object(f.jsx)(tt.a,{name:"albumid",variant:"outlined",label:"albumid",fullWidth:!0,value:this.state.albumid,onChange:function(e){return t.setState({albumid:e.target.value})}}),Object(f.jsx)(tt.a,{name:"displayname",variant:"outlined",label:"displayname",fullWidth:!0,value:this.state.displayname,onChange:function(e){return t.setState({displayname:e.target.value})}}),Object(f.jsx)(tt.a,{name:"discription",variant:"outlined",label:"discription",fullWidth:!0,value:this.state.discription,onChange:function(e){return t.setState({discription:e.target.value})}}),Object(f.jsx)(P.a,{className:e.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0,children:"Submit"}),Object(f.jsx)(P.a,{variant:"contained",color:"secondary",size:"small",onClick:pt,fullWidth:!0,children:"Clear"})]})})}}]),a}(r.a.Component),ht=Object(x.f)(Object(h.a)((function(t){return{root:{"& .MuiTextField-root":{margin:t.spacing(1)}},paper:{padding:t.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10}}}),{withTheme:!0})(mt));function bt(t,e,a){return jt.apply(this,arguments)}function jt(){return(jt=Object(X.a)(Q.a.mark((function t(e,a,n){var r,i;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("file",e),r.append("filename",a),i="",t.next=6,p.a.post("".concat(m.API_Endpoint,"/upload/").concat(n),r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){i=t})).catch((function(t){console.log("Error happens"),i=t}));case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ft(t,e,a,n,r){return gt.apply(this,arguments)}function gt(){return(gt=Object(X.a)(Q.a.mark((function t(e,a,n,r,i){var c;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={album:e,filename:a,place:n,s3key:r,tags:i},t.next=3,p.a.post("".concat(m.API_Endpoint,"/pictures/"),c).then((function(t){console.log("Post request"),console.log(t)}));case 3:return console.log("Insert images to Mongo DB"),t.abrupt("return","ok");case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ot=function(){console.log("sss")},xt=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).handleSubmit=function(){var t=Object(X.a)(Q.a.mark((function t(e){return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),bt(n.state.imagePreviewUrl,n.state.loadfilename,n.props.albumid).then((function(t){"200"==t.status&&(console.log("Successed"),console.log(t),ft(n.props.albumid,n.state.filename,n.state.place,n.state.loadfilename,n.state.tags).then((function(t){console.log(t)})))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.handleCapture=function(t){var e=t.target,a=new FileReader;a.readAsDataURL(e.files[0]);var r=e.files[0].name;a.onloadend=function(t){n.setState({imagePreviewUrl:a.result,loadfilename:r})}},n.state={filename:"",albumname:"",place:"",time:"",tags:""},n}return Object(o.a)(a,[{key:"render",value:function(){var t=this,e=this.props.classes;return Object(f.jsx)(W.a,{className:e.paper,children:Object(f.jsxs)("form",{autoComplete:"off",noValidate:!0,className:"".concat(e.root," ").concat(e.form),onSubmit:this.handleSubmit,children:[Object(f.jsx)(S.a,{variant:"h6",children:"Add Photo to "+this.props.albumid}),Object(f.jsx)(tt.a,{name:"filename",variant:"outlined",label:"filename",fullWidth:!0,value:this.state.filename,onChange:function(e){return t.setState({filename:e.target.value})}}),Object(f.jsx)(tt.a,{name:"place",variant:"outlined",label:"place",fullWidth:!0,value:this.state.place,onChange:function(e){return t.setState({place:e.target.value})}}),Object(f.jsx)(tt.a,{name:"tags",variant:"outlined",label:"tags",fullWidth:!0,value:this.state.tags,onChange:function(e){return t.setState({tags:e.target.value})}}),Object(f.jsx)("input",{accept:"image/*",className:e.input,id:"icon-button-photo",onChange:this.handleCapture,type:"file",name:"formtest"}),Object(f.jsx)(P.a,{variant:"contained",component:"label",htmlFor:"icon-button-photo",children:"Upload File"}),Object(f.jsx)("div",{children:Object(f.jsx)("img",{className:e.imagecanvas,src:this.state.imagePreviewUrl})}),Object(f.jsx)(P.a,{className:e.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0,children:"Submit"}),Object(f.jsx)(P.a,{variant:"contained",color:"secondary",size:"small",onClick:Ot,fullWidth:!0,children:"Clear"})]})})}}]),a}(n.Component),vt=Object(h.a)((function(t){return{root:{"& .MuiTextField-root":{margin:t.spacing(1)}},paper:{padding:t.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10},input:{display:"none"},imagecanvas:{width:"auto",height:"auto",maxWidth:"100%",maxHeight:"100%"}}}),{withTheme:!0})(xt),yt=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).state={imageData:[],albumnames:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=this,e="".concat(m.API_Endpoint,"/pictures/")+this.props.location.state.albumid;p.a.get(e).then((function(e){t.setState({imageData:e.data})}))}},{key:"render",value:function(){return console.log(this.props.location.state.albumid),Object(f.jsx)("div",{children:Object(f.jsx)(W.a,{children:Object(f.jsxs)(y.a,{container:!0,justify:"center",alignItems:"stretch",spacing:3,children:[Object(f.jsx)(y.a,{item:!0,xs:12,sm:4,children:Object(f.jsx)(vt,{albumid:this.props.location.state.albumid})}),Object(f.jsx)(y.a,{item:!0,xs:12,sm:7,children:Object(f.jsx)(b.a,{className:this.props.classes.gridList,cols:4,spacing:5,children:this.state.imageData.map((function(t){return Object(f.jsx)(j.a,{cols:t.cols||1,children:Object(f.jsx)("img",{src:t.img,alt:t.title})},t.img)}))})})]})})})}}]),a}(r.a.Component),wt=Object(x.f)(Object(h.a)((function(t){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:t.palette.background.paper},gridList:{width:"100%",height:600}}}),{withTheme:!0})(yt));var Ct=function(){var t=function(){var t=Object(n.useState)(function(){var t=localStorage.getItem("token"),e=JSON.parse(t);return null===e||void 0===e?void 0:e.token}()),e=Object(A.a)(t,2),a=e[0],r=e[1];return{setToken:function(t){localStorage.setItem("token",JSON.stringify(t)),r(t.token)},token:a}}(),e=t.token,a=t.setToken;return e?Object(f.jsx)(v.a,{maxWidth:"lg",children:Object(f.jsxs)(V.a,{children:[Object(f.jsx)(Y,{}),Object(f.jsxs)(x.c,{children:[Object(f.jsx)(x.a,{exact:!0,path:"/",children:Object(f.jsx)(D,{})}),Object(f.jsx)(x.a,{exact:!0,path:"/createalbum",children:Object(f.jsx)(ht,{})}),Object(f.jsx)(x.a,{exact:!0,path:"/albumdetails",children:Object(f.jsx)(wt,{})})]})]})}):Object(f.jsx)(lt,{setToken:a})},kt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,202)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),n(t),r(t),i(t),c(t)}))};c.a.render(Object(f.jsxs)(r.a.StrictMode,{children:[Object(f.jsx)($.a,{}),Object(f.jsx)(Ct,{})]}),document.getElementById("root")),kt()},17:function(t){t.exports=JSON.parse('{"API_Endpoint":"."}')}},[[137,1,2]]]);
//# sourceMappingURL=main.1a92615b.chunk.js.map